<!doctype html>
<html class="no-js" lang="en" data-content_root="">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />
<link rel="index" title="Index" href="../../genindex.html" /><link rel="search" title="Search" href="../../search.html" /><link rel="next" title="Synthpop" href="synthpop.html" /><link rel="prev" title="Generators" href="modules.html" />

    <!-- Generated with Sphinx 6.2.1 and Furo 2023.09.10 -->
        <title>DataSynthesizer - Clover documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo.css?digest=369552022d0b975c8e74270ce6eabe0fb7978f24" />
    <link rel="stylesheet" type="text/css" href="../../_static/styles/furo-extensions.css?digest=30d1aed668e5c3a91c3e3bf6a60b675221979f0e" />
    
    


<style>
  body {
    --color-code-background: #ffffff;
  --color-code-foreground: black;
  --color-brand-primary: #7C4DFF;
  --color-brand-content: #7C4DFF;
  --color-problematic: #00b377;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #926bff;
  --color-brand-content: #926bff;
  --color-problematic: #00b377;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #272822;
  --color-code-foreground: #f8f8f2;
  --color-brand-primary: #926bff;
  --color-brand-content: #926bff;
  --color-problematic: #00b377;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="../../index.html"><div class="brand">Clover  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../../index.html">
  
  
  <span class="sidebar-brand-text">Clover  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../home/clover.html">What is Clover?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../home/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../home/quickstart.html">Quickstart</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../home/getting_involved.html">Getting Involved</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../home/license.html">MIT License</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction.html">Introduction</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="modules.html">Generators</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle navigation of Generators</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">DataSynthesizer</a></li>
<li class="toctree-l2"><a class="reference internal" href="synthpop.html">Synthpop</a></li>
<li class="toctree-l2"><a class="reference internal" href="smote.html">SMOTE</a></li>
<li class="toctree-l2"><a class="reference internal" href="mst.html">Private-PGM - MST</a></li>
<li class="toctree-l2"><a class="reference internal" href="ctgan.html">Conditional Tabular GAN (CTGAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="tvae.html">TVAE</a></li>
<li class="toctree-l2"><a class="reference internal" href="ctabgan.html">Conditional Table GAN (CTAB-GAN)</a></li>
<li class="toctree-l2"><a class="reference internal" href="findiff.html">FinDiff</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../metrics/modules.html">Metrics</a><input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle navigation of Metrics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../metrics/utility.html">Utility Metrics</a></li>
<li class="toctree-l2"><a class="reference internal" href="../metrics/privacy.html">Privacy Metrics</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../optimization/modules.html">Optimization</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle navigation of Optimization</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../optimization/pso.html">Discrete Particle Swarm Optimization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimization/optuna.html">Hyperparameter tuning with Optuna</a></li>
<li class="toctree-l2"><a class="reference internal" href="../optimization/raytune.html">Parallel hyperparameter tuning with RayTune</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../API/generators/modules.html">Generators API</a><input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" role="switch" type="checkbox"/><label for="toctree-checkbox-4"><div class="visually-hidden">Toggle navigation of Generators API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../API/generators/generators.html">generators</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../API/metrics/modules.html">Metrics API</a><input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" role="switch" type="checkbox"/><label for="toctree-checkbox-5"><div class="visually-hidden">Toggle navigation of Metrics API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2 has-children"><a class="reference internal" href="../../API/metrics/metrics.html">metrics</a><input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" role="switch" type="checkbox"/><label for="toctree-checkbox-6"><div class="visually-hidden">Toggle navigation of metrics</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l3"><a class="reference internal" href="../../API/metrics/metrics.utility.html">metrics.utility</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../API/metrics/metrics.privacy.html">metrics.privacy</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../API/optimization/modules.html">Optimization API</a><input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" role="switch" type="checkbox"/><label for="toctree-checkbox-7"><div class="visually-hidden">Toggle navigation of Optimization API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../API/optimization/optimization.html">optimization</a></li>
</ul>
</li>
<li class="toctree-l1 has-children"><a class="reference internal" href="../../API/utils/modules.html">Utilities API</a><input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" role="switch" type="checkbox"/><label for="toctree-checkbox-8"><div class="visually-hidden">Toggle navigation of Utilities API</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="../../API/utils/utils.html">utils</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tutorial</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/synthetic_data_generation.html">Synthetic Data Generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/utility_report.html">How to generate a utility report?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/privacy_report.html">How to generate a membership inference attacks report?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/tune_hyperparameters.html">Synthetic Data Generation – Find the best hyperparameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/combined_report.html">How to generate a combined utility/privacy report?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial/metareport.html">How to generate a metareport?</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section id="datasynthesizer">
<h1>DataSynthesizer<a class="headerlink" href="#datasynthesizer" title="Permalink to this heading">#</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">#</a></h2>
<p>DataSynthesizer is a comprehensive system designed for generating synthetic datasets from private input data. DataSynthesizer addresses the challenges of data sharing agreements, particularly in fields such as government, social sciences and healthcare, where strict privacy rules can hinder collaborations. This system can produce structurally and statistically similar datasets while maintaining robust privacy safeguards. Its user-friendly design offers three intuitive operational modes, requiring minimal user input. The potential applications of DataSynthesizer are diverse, ranging from standalone library usage to integration into comprehensive data sharing platforms. Ongoing efforts are focused on enhancing data owner accessibility and meeting additional requirements. DataSynthesizer is open source, accessible for download <a class="reference external" href="https://github.com/DataResponsibly/DataSynthesizer">here</a>, making it a valuable resource for the data privacy and sharing community.</p>
<p>DataSynthesizer constructs a Bayesian network to model attribute dependencies, defines a sampling order, models parent attributes and generates synthetic data while preserving privacy and maintaining the statistical relationships between attributes. Here is a short background on Bayesian Networks:</p>
<section id="bayesian-networks">
<h3>Bayesian networks<a class="headerlink" href="#bayesian-networks" title="Permalink to this heading">#</a></h3>
<p>A Bayesian network is a graphical model that encodes probabilistic relationships among variables of interest. It takes the form of a directed acyclic graph where the nodes represent variables and the edges indicate a dependency between variables. In the context of synthetic data generation, Bayesian networks are used to learn probabilistic graphical structures from real datasets and then simulate synthetic records from the learned structure. This approach has been successfully applied in various fields, including healthcare.</p>
<p>Here’s how Bayesian networks can be applied in the process of synthetic data generation:</p>
<ul class="simple">
<li><p>Modeling Dependencies: Each node in the network represents an attribute, and the edges between nodes indicate conditional dependencies. By constructing a Bayesian network from the original dataset, you can capture how attributes influence one another, such as how age might influence income or education level.</p></li>
<li><p>Learning the Network: In many cases, the structure of the Bayesian network can be learned directly from the original data. This process involves identifying the conditional dependencies and the structure that best fits the data. Bayesian network learning algorithms can discover relationships that might not be immediately apparent, making them a valuable tool for understanding complex datasets.</p></li>
<li><p>Sampling from the Network: Once the Bayesian network is established, you can use it to sample synthetic data. Starting with known values or evidence for certain attributes, the network generates values for other attributes based on their conditional dependencies. This process ensures that the synthetic data retains the same probabilistic relationships as the original data.</p></li>
</ul>
<p>In healthcare, a study used Bayesian networks to generate synthetic patient records from real datasets including the University of California Irvine (UCI) heart disease and diabetes datasets as well as the MIMIC-III diagnoses database. The generated synthetic data was evaluated through statistical tests, machine learning tasks, preservation of rare events, disclosure risk and the ability of a machine learning classifier to discriminate between the real and synthetic data.</p>
</section>
</section>
<section id="id1">
<h2>DataSynthesizer<a class="headerlink" href="#id1" title="Permalink to this heading">#</a></h2>
<p>DataSynthesizer consists of three high-level modules <cite>DataDescriber</cite>, <cite>DataGenerator</cite> and <cite>ModelInspector</cite>. The first, <cite>DataDescriber</cite>, investigates the data types, correlations and distributions of the attributes in the private dataset and produces a data summary, adding noise to the distributions to preserve privacy. <cite>DataGenerator</cite> samples from the summary computed by <cite>DataDescriber</cite> and outputs synthetic data. <cite>ModelInspector</cite> shows an intuitive description of the data summary that was computed by <cite>DataDescriber</cite>, allowing the data owner to evaluate the accuracy of the summarization process and adjust any parameters. In more depth, the <cite>DataDescriber</cite> module identifies the attributes’ domains and estimates their distributions, saving this information in a dataset description file. For categorical attributes, <cite>DataDescriber</cite> computes the frequency distribution, which is represented as a bar chart. The <cite>DataGenerator</cite> module then samples from this distribution to create the synthetic dataset. Non-categorical numerical and datetime attributes are processed differently, with <cite>DataDescriber</cite> creating an equi-width histogram to represent their distribution. <cite>DataGenerator</cite> uses uniform sampling from this histogram during data generation. For non-categorical string attributes, <cite>DataDescriber</cite> records the minimum and maximum lengths, generating random strings within this length range during data generation.</p>
<section id="datadescriber">
<h3>DataDescriber<a class="headerlink" href="#datadescriber" title="Permalink to this heading">#</a></h3>
<p>DataSynthesizer’s DataDescriber module plays a central role in the system’s functionality, aiding in the inference and definition of data types and domains for the attributes within a given dataset. Data types are classified into four distinct categories within DataSynthesizer. Users have the flexibility to explicitly specify these data types as needed. However, if a user does not specify a data type for an attribute, DataDescriber takes on the task of inferring it. The initial step in this process involves determining if an attribute is numerical and, if so, whether it is an integer or a floating-point number. In the case that the attribute doesn’t align with any of the numerical categories, DataDescriber attempts to parse it as a datetime attribute. If this is unsuccessful, the attribute is identified as a string.</p>
<p>The domain can become more restricted if an attribute is categorized as “categorical.” Categorical attributes are those for which only specific values are legitimate. It’s noteworthy that even integer, floating-point and datetime attributes can fall under the categorical category. The general criterion for an attribute to be considered categorical is when a limited number of distinct values appear in the input dataset. In the event that the input dataset contains missing values, DataDescriber recognizes their significance and computes the missing rate for each attribute. This rate is calculated as the number of observed missing values divided by the dataset’s size, denoted as <cite>n</cite>. This information is crucial in ensuring that the synthetic data generated by DataSynthesizer accurately represents the missing values present in the original dataset.</p>
</section>
<section id="datagenerator">
<h3>DataGenerator<a class="headerlink" href="#datagenerator" title="Permalink to this heading">#</a></h3>
<p>The DataGenerator component operates based on the dataset description file created by DataDescriber. The synthetic dataset size can be specified by the user, with the default size being the same as the input dataset, denoted as <cite>n</cite>. When the DataGenerator is in random mode, it generates random values for each attribute while ensuring type consistency. In independent attribute mode, DataGenerator draws samples from bar charts or histograms using uniform sampling. In correlated attribute mode, attribute values are sampled in an order determined by the Bayesian network of DataDescriber. Differential privacy is a critical concern, as repeated data generation requests can lead to disclosure of private information. To safeguard against such risks, a unique random seed can be assigned to each individual generating a synthetic dataset, a measure that the system administrator can implement. DataGenerator facilitates this by offering per-user seed functionality, adding an extra layer of privacy protection for those interacting with the system.</p>
</section>
<section id="model-inspector">
<h3>Model Inspector<a class="headerlink" href="#model-inspector" title="Permalink to this heading">#</a></h3>
<p>The Model Inspector component offers a range of built-in functions aimed at assessing the similarity between the private input dataset and the synthetic output dataset. This tool enables data owners to efficiently verify whether the synthetic dataset contains detectable differences by facilitating a comparison of the first five and last five tuples in both datasets. Model Inspector also enables users to visually inspect and compare these attribute distributions through representations like bar charts or histograms. Additionally, the system calculates a correlation coefficient that aligns with the attribute type and the KL divergence value. The correlation coefficient measures the extent of association between attributes, while the KL divergence quantifies the disparity between the “before” and “after” probability distributions for a specific attribute. In scenarios where correlated attribute mode is employed, Model Inspector provides comprehensive insights by presenting matrices that illustrate pairwise mutual information before and after the synthetic data generation process. It also provides information about Bayesian networks. This functionality allows data owners to conveniently assess and compare the statistical characteristics of both datasets in one glance. Ultimately, the Model Inspector serves as a valuable tool for ensuring the privacy-preserving synthetic dataset aligns closely with the original private dataset, both in terms of individual tuple comparisons and overall statistical properties.</p>
</section>
</section>
<section id="algorithm">
<h2>Algorithm<a class="headerlink" href="#algorithm" title="Permalink to this heading">#</a></h2>
<p>DataSynthesizer uses the GreedyBayes algorithm to create Bayesian Networks (BN) that capture the probabilistic relationships between attributes, representing how attributes are correlated. A Bayesian network is constructed from the input dataset (D), the set of attributes (A) and a parameter (k) that specifies the maximum number of parent nodes for each node in the BN. During this process, the algorithm maintains a set of visited attributes (V) and a subset of visited attributes that could potentially become parents of a node (X) in the BN. The selection of which attributes to become parents of X is done greedily, with the goal of maximizing mutual information.</p>
<p>The Bayesian networks constructed in step above provide the order in which attribute values should be sampled to maintain the correlations between attributes. The distributions used for generating dependent attribute values are referred to as “conditioned distributions.” To maintain privacy, noise (represented as ε) is injected into these conditioned distributions. This noise prevents the disclosure of sensitive information about individual data points. The parent attributes of a dependent attribute can be either categorical or numerical. These parent attributes distributions are modeled using bar charts for categorical parents and histograms for numerical parents. The conditions for a dependent attribute are based on the legal values of categorical parent attributes and the intervals of numerical parent attributes. Intervals are established in a manner similar to the unconditioned distributions of parent attributes.</p>
<p>Finally, the synthetic data is generated from the conditioned distributions in the order specified by the Bayesian networks.</p>
<p>The pseudocode for the synthetic data generation algorithm using Bayesian networks is specified below. Please note that this is a simplified version of the algorithm. The actual implementation would involve more complex steps and considerations, such as handling privacy, noise injection for differential privacy, and specific methods for computing differentially private distributions and modeling parent attributes.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span># Synthetic Data Generation Algorithm

# Step 1: Construct Bayesian Networks
function ConstructBayesianNetworks(Dataset D, Set of attributes A, Maximum number of parent nodes k):
    Initialize Bayesian network BN
    Initialize set of visited attributes V
    Initialize subset of potential parent attributes P
    for each attribute X in A:
        Select subset of attributes P from V that maximizes mutual information with X
        Add X and P to BN
        Add X to V
    return BN

# Step 2: Define Sampling Order
function DefineSamplingOrder(Bayesian network BN):
    return order of attributes in BN

# Step 3: Model Parent Attributes
function ModelParentAttributes(Bayesian network BN, Privacy budget ε):
    Initialize set of conditioned distributions CD
    for each attribute X in BN:
        if X has parent attributes P:
            for each parent attribute Pi in P:
                if Pi is categorical:
                    Model distribution of Pi using bar chart
                else if Pi is numerical:
                    Model distribution of Pi using histogram
                Compute conditioned distribution of X given Pi in a differentially private manner
                Add conditioned distribution to CD
    return CD

# Main function
function SyntheticDataGeneration(Dataset D, Set of attributes A, Maximum number of parent nodes k, Privacy budget ε):
    BN = ConstructBayesianNetworks(D, A, k)
    order = DefineSamplingOrder(BN)
    CD = ModelParentAttributes(BN, ε)
    Generate synthetic data from CD in the order specified by order
</pre></div>
</div>
<p>Here’s an explanation of each step:</p>
<p><strong>Step 1: Construct Bayesian Networks</strong>
This step involves constructing Bayesian networks (BNs) to model the probabilistic dependencies among attributes in the original dataset. Here’s what each part of the code does:</p>
<ul class="simple">
<li><p><cite>Initialize Bayesian network BN</cite>: Create an empty Bayesian network to be filled with nodes and edges.</p></li>
<li><p><cite>Initialize set of visited attributes V</cite>: Start with an empty set to keep track of attributes that have been visited during network construction.</p></li>
<li><p><cite>Initialize subset of potential parent attributes P</cite>: Create an empty subset to store attributes that are candidates for being parents of a given node.</p></li>
<li><dl class="simple">
<dt><cite>for each attribute X in A</cite>: Loop through each attribute in the set of attributes A.</dt><dd><ul>
<li><p><cite>Select subset of attributes P from V that maximizes mutual information with X</cite>: Choose a subset of attributes from the visited set that maximizes the mutual information with the current attribute X. This step determines the parent attributes for X in the Bayesian network.</p></li>
<li><p><cite>Add X and P to BN</cite>: Add the attribute X and its selected parent attributes P to the Bayesian network BN.</p></li>
<li><p><cite>Add X to V</cite>: Include the current attribute X in the set of visited attributes.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><cite>return BN</cite>: The constructed Bayesian network BN captures the dependencies between attributes and their parent nodes.</p></li>
</ul>
<p><strong>Step 2: Define Sampling Order</strong>
This step is relatively straightforward:</p>
<ul class="simple">
<li><p><cite>return order of attributes in BN</cite>: Determine the order in which attribute values should be sampled from the Bayesian network BN. The order is essential to ensure that the generated synthetic data preserves the relationships and dependencies between attributes.</p></li>
</ul>
<p><strong>Step 3: Model Parent Attributes</strong>
This step focuses on modeling the parent attributes and creating conditioned distributions for generating synthetic data:</p>
<ul class="simple">
<li><p><cite>Initialize set of conditioned distributions CD</cite>: Start with an empty set to store the conditioned distributions.</p></li>
<li><dl class="simple">
<dt><cite>for each attribute X in BN</cite>: Iterate through each attribute in the Bayesian network BN.</dt><dd><ul>
<li><dl class="simple">
<dt><cite>if X has parent attributes P</cite>: Check if the current attribute X has parent attributes (P).</dt><dd><ul>
<li><dl class="simple">
<dt><cite>for each parent attribute Pi in P</cite>: Loop through each parent attribute in the set of parent attributes P.</dt><dd><ul>
<li><dl class="simple">
<dt><cite>if Pi is categorical</cite>: Check if the parent attribute Pi is categorical.</dt><dd><ul>
<li><p><cite>Model distribution of Pi using a bar chart</cite>: Model the distribution of Pi using a bar chart, which is suitable for categorical attributes.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt><cite>else if Pi is numerical</cite>: Check if the parent attribute Pi is numerical.</dt><dd><ul>
<li><p><cite>Model distribution of Pi using a histogram</cite>: Model the distribution of Pi using a histogram, which is appropriate for numerical attributes.</p></li>
</ul>
</dd>
</dl>
</li>
<li><p><cite>Compute conditioned distribution of X given Pi in a differentially private manner</cite>: Calculate the conditioned distribution of X given Pi while preserving differential privacy.</p></li>
<li><p><cite>Add conditioned distribution to CD</cite>: Include the calculated conditioned distribution in the set of conditioned distributions CD.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><p><cite>return CD</cite>: The set CD now contains all the conditioned distributions necessary for generating synthetic data, considering the relationships with parent attributes.</p></li>
</ul>
<p><strong>Main Function (SyntheticDataGeneration)</strong>
The main function combines the results from the previous steps to generate synthetic data:</p>
<ul class="simple">
<li><p><cite>BN = ConstructBayesianNetworks(D, A, k)</cite>: Create the Bayesian network BN using the provided original dataset D, attributes A, and the maximum number of parent nodes (k).</p></li>
<li><p><cite>order = DefineSamplingOrder(BN)</cite>: Define the order in which attribute values should be sampled based on the constructed Bayesian network BN.</p></li>
<li><p><cite>CD = ModelParentAttributes(BN, ε)</cite>: Model the parent attributes and create the conditioned distributions while maintaining privacy (using the privacy budget ε).</p></li>
<li><p><cite>Generate synthetic data from CD in the order specified by order</cite>: Use the conditioned distributions in the specified order to generate the synthetic dataset while preserving the statistical properties and privacy constraints.</p></li>
</ul>
</section>
<section id="clover-implementation">
<h2>Clover implementation<a class="headerlink" href="#clover-implementation" title="Permalink to this heading">#</a></h2>
<p>Clover only implements the correlated attribute mode of the DataGenerator. As a result, the computation time can vary greatly depending on the dataset size and the number of features.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Wrapper of the DataSynthesizer implementation https://github.com/DataResponsibly/DataSynthesizer.</span>

<span class="sd">See the article `Ping, Haoyue, Julia Stoyanovich, and Bill Howe.</span>
<span class="sd">&quot;Datasynthesizer: Privacy-preserving synthetic datasets.&quot; Proceedings of the 29th International Conference on</span>
<span class="sd">Scientific and Statistical Database Management. 2017.</span>
<span class="sd">&lt;https://dl.acm.org/doi/abs/10.1145/3085504.3091117&gt;`_ for more details.</span>

<span class="sd">:cvar name: the name of the metric</span>
<span class="sd">:vartype name: str</span>

<span class="sd">:param df: the data to synthesize</span>
<span class="sd">:param metadata: a dictionary containing the list of **continuous** and **categorical** variables</span>
<span class="sd">:param random_state: for reproducibility purposes</span>
<span class="sd">:param generator_filepath: the path of the generator to sample from if it exists</span>
<span class="sd">:param candidate_keys: the candidate keys of the original database</span>
<span class="sd">:param epsilon: the epsilon-DP for the Differential Privacy (0 for no added noise)</span>
<span class="sd">:param degree: the maximum numbers of parents in the Bayesian Network</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;DataSynthesizer&quot;</span>

<span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">df</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">,</span>
    <span class="n">metadata</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">random_state</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">generator_filepath</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">Path</span><span class="p">,</span> <span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">candidate_keys</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">epsilon</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">degree</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">5</span><span class="p">,</span>
<span class="p">):</span>
</pre></div>
</div>
</section>
<section id="how-to-optimize-the-hyperparameters">
<h2>How to optimize the hyperparameters?<a class="headerlink" href="#how-to-optimize-the-hyperparameters" title="Permalink to this heading">#</a></h2>
<p>The only hyperparameters of DataSynthesizer are the Differential Privacy parameters <cite>epsilon</cite> and <cite>delta</cite>. The optimal choice will be discussed in a future development of the library.</p>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><a class="reference external" href="https://dl.acm.org/doi/10.1145/3085504.3091117">DataSynthesizer: Privacy-Preserving Synthetic Datasets</a></p></li>
<li><p><a class="reference external" href="https://pubmed.ncbi.nlm.nih.gov/33367620/">Application of Bayesian networks to generate synthetic health data</a></p></li>
<li><p><a class="reference external" href="https://dl.acm.org/doi/10.1145/3411170.3411243">Bayesian Networks-based personal data synthesis</a></p></li>
<li><p><a class="reference external" href="https://www.sciencedirect.com/science/article/pii/S2667096823000241">Comparison of tabular synthetic data generation techniques using propensity and cluster log metric</a></p></li>
<li><p><a class="reference external" href="https://www.scb.se/contentassets/ca21efb41fee47d293bbee5bf7be7fb3/using-bayesian-networks-to-create-synthetic-data.pdf">Using Bayesian Networks to Create Synthetic Data</a></p></li>
<li><p><a class="reference external" href="https://www.aimspress.com/article/doi/10.3934/mbe.2021426">Synthetic data generation with probabilistic Bayesian Networks</a></p></li>
<li><p><a class="reference external" href="https://cprd.com/sites/default/files/2022-02/Tucker%20et%20al.%20preprint.pdf">Practical Lessons from Generating Synthetic Healthcare Data with Bayesian Networks</a></p></li>
<li><p><a class="reference external" href="https://journalprivacyconfidentiality.org/index.php/jpc/article/download/776/723">Synthetic data generation with differential privacy via Bayesian networks</a></p></li>
<li><p><a class="reference external" href="https://github.com/DataResponsibly/DataSynthesizer/tree/master">https://github.com/DataResponsibly/DataSynthesizer/tree/master</a></p></li>
<li><p><a class="reference external" href="https://github.com/DataResponsibly/DataSynthesizer">https://github.com/DataResponsibly/DataSynthesizer</a></p></li>
<li><p><a class="reference external" href="https://github.com/daanknoors/synthetic_data_generation">https://github.com/daanknoors/synthetic_data_generation</a></p></li>
<li><p><a class="reference external" href="https://github.com/CRCHUM-CITADEL/clover/blob/main/generators/dataSynthesizer.py">https://github.com/CRCHUM-CITADEL/clover/blob/main/generators/dataSynthesizer.py</a></p></li>
<li><p><a class="reference external" href="https://github.com/CRCHUM-CITADEL/clover/blob/main/notebooks/synthetic_data_generation.ipynb">https://github.com/CRCHUM-CITADEL/clover/blob/main/notebooks/synthetic_data_generation.ipynb</a></p></li>
</ul>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="synthpop.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Synthpop</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="modules.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Generators</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2023, IVADO PRF3 Human Health
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">DataSynthesizer</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a><ul>
<li><a class="reference internal" href="#bayesian-networks">Bayesian networks</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id1">DataSynthesizer</a><ul>
<li><a class="reference internal" href="#datadescriber">DataDescriber</a></li>
<li><a class="reference internal" href="#datagenerator">DataGenerator</a></li>
<li><a class="reference internal" href="#model-inspector">Model Inspector</a></li>
</ul>
</li>
<li><a class="reference internal" href="#algorithm">Algorithm</a></li>
<li><a class="reference internal" href="#clover-implementation">Clover implementation</a></li>
<li><a class="reference internal" href="#how-to-optimize-the-hyperparameters">How to optimize the hyperparameters?</a></li>
<li><a class="reference internal" href="#references">References</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script src="../../_static/scripts/furo.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    </body>
</html>